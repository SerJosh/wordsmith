{% extends "base.html" %}

{% load cloudinary %}

{% load static %}

{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Home Page</title>
</head>
<body>
    {% if user.is_authenticated %}
<div class="index-body" style="background-image: url('static/images/book.avif'); background-size: cover;">
    <div class="mx-auto">
    <h1 class="text-center">Stories</h1>
  </div>
    {% for story in stories %}
    <div class=" mx-auto big-story-card" style="width: 25rem;" >
    <div class="card mx-auto story-card " style="width: 20rem;">
      <div class="card-body mx-auto">
        <h5 class="card-title">{{ story.Title }}</h5>
      </div>


      {% if "placeholder" in story.Story_Cover.url %}
  <img class="card-img-top" src="{% static 'images/book.png' %}"
    alt="placeholder image">
  {% else %}
  <img class="card-img-top" src=" {{ story.Story_Cover.url }}"
    alt="{{ story.Title }}">
  {% endif %}


      <!-- {% if story.Story_Cover %}
      <img src="{{ story.Story_Cover.url }}" class="card-img-top" alt="...">
      {% endif %} -->
      
        <div class="card-body mx-auto">
        <p class="card-text text-break">{{ story.Blurb }}</p>
      </div>
      <div class="card-body mx-auto">
        <a href="{% url 'view-story' story.id %}" class="btn btn-dark btn-welcome">view</a>
        <a href="{% url 'edit-story' story.id %}"class="btn btn-dark btn-welcome">Edit</a>
        <a href="{% url 'delete-story' story.id %}"class="btn btn-dark btn-welcome">Delete</a>
      </div>
  </div>
  </div>
    {% endfor %}

    <div class="">
      <ul class="pagination justify-content-center paginator">
    {% if stories.has_previous %}
    <li class="page-item bg-dark"><a href="?page=1" class="page-link bg-dark text-white">&laquo First</a></li>

      <li class="page-item "><a href="?page={{ stories.previous_page_number }}" class="page-link bg-dark text-white">Previous</a></li>
	
{% endif %}

<li class="page-item disabled"><a href="#" class="page-link bg-dark text-white">
  Page {{ stories.number }} of {{ stories.paginator.num_pages }}
</a></li>

{% if stories.has_next %}
<li class="page-item"><a href="?page={{ stories.next_page_number }}" class="page-link bg-dark text-white">Next</a></li>

	<li class="page-item"></li><a href="?page={{ stories.paginator.num_pages }}" class="page-link bg-dark text-white">Last &raquo</a></li>

{% endif %}
</ul>
</div>
    {% else %}
    <div class="vh-100 container-fluid" style="background-image: url('static/images/book.avif'); background-size: cover;">
        <div class="card text-center mb-3 mx-auto p-2 welcome-card " style="width: 50rem;">
            <div class="card-body d-grid gap-4 col-3 mx-auto">
              <a href="{% url 'account_login' %}" class="btn btn-dark btn-welcome">Login</a>
              <br>
              <a href="{% url 'account_signup' %}" class="btn btn-dark btn-welcome">Register</a>
              <br>
              <a href="#" class="btn btn-dark btn-welcome">About</a>
            </div>
          </div>

{% endif %}
</div>
</body>
</html>

{% endblock %}